-- LAB_NAVIGATION 테이블 생성
CREATE TABLE LAB_NAVIGATION
(
    ID            NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE         VARCHAR2(100) NOT NULL,
    ICON          VARCHAR2(50),
    PARENT_ID     NUMBER,
    ORDER_INDEX   NUMBER DEFAULT 0,
    IS_ACTIVE     NUMBER(1) DEFAULT 1,
    REQUIRED_ROLE VARCHAR2(20),
    CONSTRAINT FK_NAVIGATION_PARENT FOREIGN KEY (PARENT_ID) REFERENCES LAB_NAVIGATION (ID)
);

-- Users 테이블 생성
CREATE TABLE LAB_USERS
(
    ID                NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL             VARCHAR2(100) UNIQUE NOT NULL,
    NICKNAME          VARCHAR2(50),
    PROFILE_IMAGE_URL VARCHAR2(500),
    PROVIDER          VARCHAR2(20),
    PROVIDER_ID       VARCHAR2(100),
    ROLE              VARCHAR2(20) NOT NULL,
    IS_ACTIVE         NUMBER(1) DEFAULT 1,
    CREATED_AT        TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT        TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    LAST_LOGIN_AT     TIMESTAMP
);
-- 샘플 Navigation Items 데이터 삽입
INSERT INTO LAB_NAVIGATION
    (
        TITLE,
        PATH,
        ICON,
        PARENT_ID,
        ORDER_INDEX,
        IS_ACTIVE,
        REQUIRED_ROLE
    )
VALUES
-- 메인 메뉴들
('홈', '/home', 'IconHome', NULL, 1, 1, 'USER'),
('Backend', NULL, 'IconServer', NULL, 1, 1, 'USER'),
('Frontend', NULL, 'IconServer', NULL, 1, 1, 'USER'),

-- -- 사용자 관리 하위 메뉴
INSERT INTO LAB_NAVIGATION
    (
        TITLE,
        PATH,
        ICON,
        PARENT_ID,
        ORDER_INDEX,
        IS_ACTIVE,
        REQUIRED_ROLE
    )
VALUES
    ('Java', '/posts/java', 'IconCoffee', 2, 1, 1, 'USER'),
    ('Spring', '/posts/spring', 'IconLeaf', 2, 2, 1, 'USER'),
    ('AEM', '/posts/aem', 'IconBrandAdobe', 2, 2, 1, 'USER');

-- -- 시스템 관리 하위 메뉴
-- INSERT INTO LAB_NAVIGATION (TITLE, PATH, ICON, PARENT_ID, ORDER_INDEX, IS_ACTIVE, REQUIRED_ROLE)
-- VALUES ('시스템 설정', '/admin/system', 'IconServer', 3, 1, 1, 'ADMIN'),
--        ('로그 관리', '/admin/logs', 'IconFileText', 3, 2, 1, 'ADMIN'),
--        ('네비게이션 관리', '/admin/navigation', 'IconNavigation', 3, 3, 1, 'ADMIN');

-- 보고서 하위 메뉴
-- INSERT INTO navigation_items (title, path, icon, parent_id, order_index, is_active, required_role)
-- VALUES ('사용자 리포트', '/reports/users', 'IconReport', 4, 1, 1, 'USER'),
--        ('시스템 리포트', '/reports/system', 'IconChartLine', 4, 2, 1, 'ADMIN');

-- 설정 하위 메뉴
-- INSERT INTO LAB_NAVIGATION (TITLE, PATH, ICON, PARENT_ID, ORDER_INDEX, IS_ACTIVE, REQUIRED_ROLE)
-- VALUES ('개인 설정', '/settings/profile', 'IconUser', 5, 1, 1, 'USER'),
--        ('알림 설정', '/settings/notifications', 'IconBell', 5, 2, 1, 'USER');

COMMIT;