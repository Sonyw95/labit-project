-- LAB_NAVIGATION 테이블 생성
CREATE TABLE LAB_NAVIGATION
(
    NAV_ID     NUMBER PRIMARY KEY,
    NAV_NAME   VARCHAR2(100) NOT NULL,
    NAV_URL    VARCHAR2(500),
    NAV_ICON   VARCHAR2(50),
    PARENT_ID  NUMBER,
    NAV_ORDER  NUMBER  DEFAULT 0,
    NAV_LEVEL  NUMBER  DEFAULT 1,
    IS_ACTIVE  CHAR(1) DEFAULT 'Y' CHECK (IS_ACTIVE IN ('Y', 'N')),
    CREATED_AT DATE    DEFAULT SYSDATE,
    UPDATED_AT DATE    DEFAULT SYSDATE,
    CONSTRAINT FK_NAVIGATION_PARENT FOREIGN KEY (PARENT_ID) REFERENCES LAB_NAVIGATION (NAV_ID)
);

commit;

-- 시퀀스 생성
CREATE SEQUENCE seq_lab_navigation
    START WITH 1
    INCREMENT BY 1
    NOCACHE;

-- 인덱스 생성
CREATE INDEX IDX_NAVIGATION_PARENT ON LAB_NAVIGATION (parent_id);
CREATE INDEX IDX_NAVIGATION_ORDER ON LAB_NAVIGATION (nav_order);
CREATE INDEX IDX_NAVIGATION_LEVEL ON LAB_NAVIGATION (nav_level);


-- LAB_USER 테이블 생성
CREATE TABLE LAB_USER
(
    USER_ID         NUMBER PRIMARY KEY,
    KAKAO_ID        VARCHAR2(50) UNIQUE  NOT NULL,
    EMAIL           VARCHAR2(100) UNIQUE NOT NULL,
    NICKNAME        VARCHAR2(100)        NOT NULL,
    PROFILE_IMAGE   VARCHAR2(500),
    THUMBNAIL_IMAGE VARCHAR2(500),
    USER_ROLE       VARCHAR2(20) DEFAULT 'USER' CHECK (USER_ROLE IN ('USER', 'ADMIN')),
    IS_ACTIVE       CHAR(1)      DEFAULT 'Y' CHECK (IS_ACTIVE IN ('Y', 'N')),
    LAST_LOGIN_AT   DATE,
    CREATED_AT      DATE         DEFAULT SYSDATE,
    UPDATED_AT      DATE         DEFAULT SYSDATE
);

-- 시퀀스 생성
CREATE SEQUENCE SEQ_LAB_USER
    START WITH 1
    INCREMENT BY 1
    NOCACHE;

-- 인덱스 생성
CREATE INDEX IDX_USER_KAKAO_ID ON LAB_USER (kakao_id);
CREATE INDEX IDX_USER_EMAIL ON LAB_USER (email);
CREATE INDEX IDX_USER_ACTIVE ON LAB_USER (is_active);

-- 샘플 데이터 삽입
INSERT INTO LAB_USER (USER_ID, KAKAO_ID, EMAIL, NICKNAME, PROFILE_IMAGE, USER_ROLE)
VALUES (1, '12345678', 'test@example.com', '테스트유저', 'https://example.com/profile.jpg', 'ADMIN') ;

INSERT INTO LAB_USER (USER_ID, KAKAO_ID, EMAIL, NICKNAME, PROFILE_IMAGE, USER_ROLE)
VALUES(2, '87654321', 'user@example.com', '일반유저', 'https://example.com/user.jpg', 'USER');

COMMIT;